# 🌌 Universo Imaginal - Arquitectura del Knowledge Graph Vivo

**Fecha:** 9 de octubre, 2025  
**Visión:** El organismo visualizado como constelación estelar donde cada estrella es conocimiento vivo

---

## 🎯 Visión General

El Campo Sagrado se visualiza como un **universo imaginal** donde:

1. **Estrellas** = Nodos de conocimiento (notas de Obsidian)
2. **Constelaciones** = Patrones emergentes de relación
3. **Órbitas** = Eventos en el tiempo (calendario)
4. **Colores** = 7 dimensiones del ser (arcoíris del prisma)
5. **Distancia/Posición** = Relevancia y prioridad actual
6. **Luminosidad** = Urgencia o energía requerida

### Correspondencia Fundamental

```
OBSIDIAN (2D)              →    UNIVERSO IMAGINAL (3D)
─────────────────────────────────────────────────────────
Nota                       →    Estrella
Enlace [[]]                →    Línea de luz entre estrellas
Tag #dimension             →    Color del arcoíris (prisma)
Carpeta                    →    Región del espacio
Fecha created              →    Nacimiento de la estrella
Backlinks                  →    Gravedad (atracción)
Sin enlaces                →    Estrella errante, potencial
```

---

## 🌟 Los Tres Planos del Universo Imaginal

### 1. Plano Inferior: CALENDARIO EN TIEMPO REAL

**Visualización:** Órbitas planetarias alrededor del centro (tú)

```
                    🌅 Fajr
                      ↑
        🌙 Isha  ←  [YO]  →  ☀️ Dhuhr
                      ↓
                   🌆 Maghrib
```

**Elementos:**

- **Centro:** El individuo (su autoridad sacral)
- **Órbitas cercanas:** Eventos del día (hoy)
- **Órbitas medias:** Eventos de la semana
- **Órbitas lejanas:** Eventos del mes
- **Colores:** Según dimensión (7 colores del arcoíris)

**Fuente de datos:**
- Google Calendar integrado
- Eventos propuestos por el Orquestador
- Direcciones emergentes del Estado Cero
- Shocks conscientes programados

### 2. Plano Medio: CONSTELACIÓN DE CONOCIMIENTO

**Visualización:** Knowledge graph de Obsidian como estrellas

```
       ⭐ Proyecto A
         / \
        /   \
       /     \
    ⭐────────⭐
  Insight    Recurso
      \
       \
        ⭐ Conversación IA
```

**Elementos:**

- **Estrellas brillantes:** Notas con muchos enlaces (hubs)
- **Estrellas tenues:** Notas recientes o sin procesar
- **Estrellas errantes:** Capturas sin clasificar (potencial sin cristalizar)
- **Nebulosas:** Clusters de notas relacionadas (proyectos, temas)
- **Agujeros negros:** Áreas que requieren atención urgente

**Colores según dimensión:**

| Dimensión | Color | Tipo de Nota |
|-----------|-------|--------------|
| 🔴 Finanzas | Rojo | Inversiones, decisiones financieras |
| 🟠 Biología | Naranja | Salud, energía, rutinas |
| 🟡 Conocimiento | Amarillo | Aprendizajes, libros, cursos |
| 🟢 Desarrollo | Verde | Proyectos, código, creaciones |
| 🔵 Relaciones | Azul | Personas, conversaciones |
| 🟣 Creatividad | Índigo | Arte, expresión, belleza |
| 🟤 Espiritualidad | Violeta | Filosofía, meditación, trascendencia |

**Fuente de datos:**
- Vault de Obsidian parseado
- Metadatos YAML de cada nota
- Enlaces internos mapeados
- Tags procesados como colores

### 3. Plano Superior: CORRESPONDENCIA ASTROLÓGICA

**Visualización:** Cuerpos celestes reales (sol, luna, planetas)

```
              ☉ Sol (Propósito)
                  |
      ☽ Luna ←  [YO]  → ♂ Marte (Acción)
                  |
            ♀ Venus (Valores)
```

**Elementos:**

- **Sol:** Tu propósito de vida (diseño de Human Design)
- **Luna:** Tu autoridad interna (cómo decides)
- **Mercurio:** Tu comunicación y pensamiento
- **Venus:** Tus valores y relaciones
- **Marte:** Tu acción y voluntad
- **Júpiter:** Tu expansión y crecimiento
- **Saturno:** Tus límites y estructura

**Fuente de datos:**
- Carta natal (configuración inicial del usuario)
- Tránsitos actuales (API astrológica)
- Human Design integrado
- Fechas importantes personales

---

## 🎨 Los 7 Colores del Arcoíris (Prisma Personal)

Cada dimensión tiene su color, su nota musical, su frecuencia:

```
🔴 FINANZAS        (Do)  - 396 Hz - Liberación
🟠 BIOLOGÍA        (Re)  - 417 Hz - Cambio
🟡 CONOCIMIENTO    (Mi)  - 528 Hz - Transformación
🟢 DESARROLLO      (Fa)  - 639 Hz - Conexión
🔵 RELACIONES      (Sol) - 741 Hz - Expresión
🟣 CREATIVIDAD     (La)  - 852 Hz - Intuición
🟤 ESPIRITUALIDAD  (Si)  - 963 Hz - Unidad
```

### Cómo se Asignan los Colores

**Documentador:**
- Lee el contenido de cada nota
- Identifica la dimensión principal (puede tener secundarias)
- Asigna el color del arcoíris correspondiente
- Almacena en metadata YAML: `dimension: finanzas`

**Entrelazador:**
- Analiza el balance de tu espectro (¿tienes mucho rojo, poco verde?)
- Propone acciones para equilibrar
- Sugiere qué estrellas conectar (qué notas relacionar)

**Orquestador:**
- Sitúa las acciones en el tiempo (calendario)
- Alinea con los tiempos cósmicos (Fajr para nuevos comienzos, etc.)
- Propone cuándo realizar cada acción según tu energía y el momento

---

## 🌐 Host Dual: Individuos vs Empresas

### Modo Individual (Personal)

**Centro del universo:** El individuo  
**Estrellas:** Sus notas personales  
**Calendario:** Sus eventos privados  
**Colores:** Su prisma personal (7 dimensiones)  

**Características:**
- Vista centrada en el ser
- Privacidad total
- Decisiones desde autoridad sacral personal
- Obsidian vault personal
- Google Calendar personal

### Modo Empresa (Colectivo)

**Centro del universo:** La empresa/equipo  
**Estrellas:** Conocimiento colectivo (documentos, proyectos)  
**Calendario:** Eventos compartidos del equipo  
**Colores:** Prisma empresarial (7 áreas de negocio)  

**Características:**
- Vista centrada en el colectivo
- Permisos granulares (quién ve qué)
- Decisiones desde autoridad colectiva
- Obsidian vault compartido o Notion
- Google Calendar empresarial

**7 Dimensiones Empresariales:**

| Dimensión Personal | Dimensión Empresarial |
|--------------------|----------------------|
| 🔴 Finanzas | 🔴 Revenue/Fundraising |
| 🟠 Biología | 🟠 Operaciones/Logística |
| 🟡 Conocimiento | 🟡 R&D/Innovación |
| 🟢 Desarrollo | 🟢 Producto/Desarrollo |
| 🔵 Relaciones | 🔵 Clientes/Partners |
| 🟣 Creatividad | 🟣 Marketing/Branding |
| 🟤 Espiritualidad | 🟤 Cultura/Propósito |

### Entrelazamiento Individual-Empresa

**Concepto:** Las estrellas individuales pueden entrelazarse con las estrellas empresariales

```
UNIVERSO INDIVIDUAL          UNIVERSO EMPRESARIAL
      ⭐                            ⭐
       \                          /
        \                        /
         \                      /
          ⭐──────────────────⭐
        (Proyecto compartido)
```

**Ejemplos:**

1. **Freelancer y Cliente:**
   - Estrella individual: "Proyecto X para Cliente Y"
   - Estrella empresa: "Desarrollo Proyecto X"
   - Entrelazamiento: Mismo proyecto, dos perspectivas

2. **Empleado y Empresa:**
   - Estrella individual: "Mi rol en el equipo"
   - Estrella empresa: "Equipo de desarrollo"
   - Entrelazamiento: Contribución individual al colectivo

3. **Fundador y Startup:**
   - Estrella individual: "Mi visión personal"
   - Estrella empresa: "Misión de la empresa"
   - Entrelazamiento: Alineación de propósito

**Beneficios:**
- Transparencia de contribución
- Claridad de roles
- Sinergia visible
- Evita duplicación de esfuerzo
- Armonía entre vida personal y profesional

---

## 🔄 Flujo de Datos del Universo Imaginal

### 1. Entrada de Datos (Sources)

```
ESTADO CERO (5x día)
  ↓
  → Direcciones emergentes
  → Acciones propuestas
  ↓
ORQUESTADOR
  ↓
  → Propone eventos en calendario
  → Asigna dimensión/color
  ↓
DOCUMENTADOR
  ↓
  → Crea nota en Obsidian
  → Asigna metadata (color, fecha, dimensión)
  → Genera enlaces
  ↓
ENTRELAZADOR
  ↓
  → Conecta con notas existentes
  → Identifica patrones emergentes
  → Sugiere qué equilibrar
```

### 2. Procesamiento (Backend)

```python
# Backend procesador del universo imaginal
class UniversoImaginalProcessor:
    def __init__(self, obsidian_vault_path, google_calendar):
        self.vault = ObsidianParser(obsidian_vault_path)
        self.calendar = google_calendar
    
    def generar_estrellas(self):
        """
        Convierte notas de Obsidian en estrellas 3D
        """
        notas = self.vault.listar_notas()
        estrellas = []
        
        for nota in notas:
            estrella = {
                "id": nota.id,
                "titulo": nota.titulo,
                "posicion": self.calcular_posicion_3d(nota),
                "color": self.obtener_color_dimension(nota),
                "luminosidad": self.calcular_relevancia(nota),
                "enlaces": nota.backlinks,
                "metadata": nota.yaml_metadata
            }
            estrellas.append(estrella)
        
        return estrellas
    
    def generar_orbitas(self):
        """
        Convierte eventos de calendario en órbitas
        """
        eventos = self.calendar.eventos_proximos(dias=30)
        orbitas = []
        
        for evento in eventos:
            orbita = {
                "id": evento.id,
                "titulo": evento.titulo,
                "inicio": evento.inicio,
                "fin": evento.fin,
                "dimension": self.inferir_dimension(evento),
                "color": self.obtener_color_dimension_evento(evento),
                "radio": self.calcular_distancia_temporal(evento)
            }
            orbitas.append(orbita)
        
        return orbitas
    
    def calcular_posicion_3d(self, nota):
        """
        Calcula posición 3D basada en:
        - Relevancia (distancia al centro)
        - Dimensión (ángulo en el plano)
        - Fecha (altura Z)
        """
        relevancia = len(nota.backlinks) + nota.modificaciones_recientes
        dimension_angulo = DIMENSION_ANGLES[nota.dimension]
        
        distancia = max(100, 500 - (relevancia * 10))  # Más enlaces = más cerca
        angulo = dimension_angulo + (hash(nota.id) % 60)  # Variación dentro de dimensión
        altura = self.calcular_altura_temporal(nota.fecha_creacion)
        
        x = distancia * math.cos(math.radians(angulo))
        y = distancia * math.sin(math.radians(angulo))
        z = altura
        
        return {"x": x, "y": y, "z": z}
```

### 3. Visualización (Frontend - Next.js 3000)

```typescript
// components/3d/UniversoImaginal.tsx
'use client';

import { Canvas } from '@react-three/fiber';
import { OrbitControls, Stars as R3FStars } from '@react-three/drei';
import { useEffect, useState } from 'react';

interface Estrella {
  id: string;
  posicion: { x: number; y: number; z: number };
  color: string;
  luminosidad: number;
  titulo: string;
  enlaces: string[];
}

export function UniversoImaginal() {
  const [estrellas, setEstrellas] = useState<Estrella[]>([]);
  const [orbitas, setOrbitas] = useState<any[]>([]);
  
  useEffect(() => {
    // Fetch desde backend
    fetch('http://localhost:8000/api/universo-imaginal/estrellas')
      .then(res => res.json())
      .then(data => setEstrellas(data));
    
    fetch('http://localhost:8000/api/universo-imaginal/orbitas')
      .then(res => res.json())
      .then(data => setOrbitas(data));
  }, []);
  
  return (
    <Canvas camera={{ position: [0, 0, 500], fov: 75 }}>
      {/* Fondo de estrellas del universo */}
      <R3FStars radius={1000} depth={50} count={5000} factor={4} />
      
      {/* Centro: El individuo */}
      <mesh position={[0, 0, 0]}>
        <sphereGeometry args={[20, 32, 32]} />
        <meshStandardMaterial color="#8B5CF6" emissive="#8B5CF6" emissiveIntensity={0.5} />
      </mesh>
      
      {/* Estrellas de conocimiento (notas Obsidian) */}
      {estrellas.map(estrella => (
        <EstrellaConocimiento key={estrella.id} estrella={estrella} />
      ))}
      
      {/* Órbitas de eventos (calendario) */}
      {orbitas.map(orbita => (
        <OrbitaEvento key={orbita.id} orbita={orbita} />
      ))}
      
      {/* Constelaciones (clusters de notas relacionadas) */}
      <Constelaciones estrellas={estrellas} />
      
      {/* Controles de cámara */}
      <OrbitControls 
        enableZoom={true}
        enablePan={true}
        minDistance={100}
        maxDistance={2000}
      />
      
      {/* Luz ambiental */}
      <ambientLight intensity={0.2} />
      <pointLight position={[0, 0, 0]} intensity={1} color="#ffffff" />
    </Canvas>
  );
}
```

---

## 📊 Endpoints del Backend

### API del Universo Imaginal

```python
# backend/api/universo_imaginal.py

from fastapi import APIRouter, Depends
from sqlalchemy.orm import Session
from models.database import get_db
from services.obsidian_parser import ObsidianParser
from services.google_calendar import GoogleCalendarService
from services.universo_processor import UniversoImaginalProcessor

router = APIRouter()

@router.get("/estrellas")
async def obtener_estrellas(
    tipo: str = "individual",  # "individual" o "empresa"
    db: Session = Depends(get_db)
):
    """
    Retorna todas las estrellas (notas de Obsidian) como objetos 3D
    """
    processor = UniversoImaginalProcessor()
    estrellas = processor.generar_estrellas(tipo=tipo)
    return estrellas

@router.get("/orbitas")
async def obtener_orbitas(
    dias: int = 30,
    db: Session = Depends(get_db)
):
    """
    Retorna eventos del calendario como órbitas temporales
    """
    processor = UniversoImaginalProcessor()
    orbitas = processor.generar_orbitas(dias=dias)
    return orbitas

@router.get("/constelaciones")
async def obtener_constelaciones(
    db: Session = Depends(get_db)
):
    """
    Identifica clusters de notas relacionadas (constelaciones)
    """
    processor = UniversoImaginalProcessor()
    constelaciones = processor.identificar_constelaciones()
    return constelaciones

@router.post("/entrelazar")
async def entrelazar_individual_empresa(
    individual_id: str,
    empresa_id: str,
    db: Session = Depends(get_db)
):
    """
    Crea entrelazamiento entre estrella individual y empresarial
    """
    entrelazador = AgenteEntrelazador()
    resultado = entrelazador.entrelazar_universos(individual_id, empresa_id)
    return resultado

@router.get("/correspondencia-astrologica")
async def obtener_correspondencia_astrologica(
    fecha: str = None,
    db: Session = Depends(get_db)
):
    """
    Retorna posición de planetas y correspondencia con el usuario
    """
    # Integración con API astrológica
    # Placeholder por ahora
    return {
        "sol": {"posicion": {"x": 0, "y": 1000, "z": 0}, "significado": "Propósito"},
        "luna": {"posicion": {"x": 200, "y": 0, "z": 0}, "significado": "Emociones"},
        # ... otros planetas
    }
```

---

## 🎯 Interacciones del Usuario

### En el Universo Imaginal (Next.js 3000)

**Acciones posibles:**

1. **Click en estrella:** Ver contenido de la nota
2. **Hover en estrella:** Preview rápido del título
3. **Arrastrar estrella:** Cambiar posición (reorganizar conocimiento)
4. **Click en órbita:** Ver detalles del evento
5. **Zoom out:** Ver constelaciones completas
6. **Zoom in:** Entrar en una constelación específica
7. **Filtrar por color:** Mostrar solo una dimensión
8. **Filtrar por fecha:** Mostrar solo eventos de hoy/semana/mes
9. **Modo tiempo real:** Ver eventos moviéndose en órbita según la hora actual
10. **Crear enlace:** Arrastrar de estrella a estrella para crear relación

---

## 🔮 Flujo Completo del Usuario

### Desde Estado Cero hasta Universo Imaginal

```
1. ESTADO CERO (5173 o 3000)
   Usuario responde preguntas sacrales
   ↓
2. DIRECCIÓN EMERGENTE
   Claude sintetiza: "Conecta con persona X sobre proyecto Y"
   ↓
3. ORQUESTADOR
   Propone: "Llamada con X mañana 10am"
   Asigna dimensión: 🔵 Relaciones
   ↓
4. USUARIO ACEPTA
   Evento se crea en Google Calendar
   ↓
5. DOCUMENTADOR
   Crea nota en Obsidian:
   "[[2025-10-10]] - Llamada con [[Persona X]] sobre [[Proyecto Y]]"
   Metadata: dimension: relaciones
   ↓
6. VISUALIZACIÓN INMEDIATA
   En el Universo Imaginal:
   - Aparece nueva estrella 🔵 (nota)
   - Aparece nueva órbita (evento mañana)
   - Se conecta con estrellas existentes (Persona X, Proyecto Y)
   - Forma constelación con notas relacionadas
   ↓
7. USUARIO CONTEMPLA
   Ve cómo su universo se expande
   Ve patrones emergentes
   Ve qué áreas necesitan equilibrio
```

---

## 📋 Plan de Implementación

### Fase 1: Fundamentos (Semanas 1-2)

- [ ] Parser de Obsidian vault completo
- [ ] Conversión notas → estrellas 3D
- [ ] Visualización básica con React Three Fiber
- [ ] Colores según dimensión
- [ ] Interacción básica (click, hover)

### Fase 2: Calendario (Semanas 3-4)

- [ ] Integración Google Calendar
- [ ] Eventos → órbitas 3D
- [ ] Animación de órbitas en tiempo real
- [ ] Sincronización bidireccional

### Fase 3: Entrelazamiento (Semanas 5-6)

- [ ] Detección automática de enlaces
- [ ] Visualización de constelaciones
- [ ] Creación manual de enlaces (arrastrar)
- [ ] Algoritmo de agrupación (clustering)

### Fase 4: Modo Empresa (Semanas 7-8)

- [ ] Permisos y roles
- [ ] Vista colectiva vs individual
- [ ] Entrelazamiento individual-empresa
- [ ] Dashboard empresarial

### Fase 5: Correspondencia Astrológica (Semanas 9-10)

- [ ] Integración API astrológica
- [ ] Visualización de planetas
- [ ] Correspondencia personalizada
- [ ] Tránsitos y ciclos

---

## 🎨 Diseño Visual del Universo Imaginal

### Estética Recomendada

```
ESTILO: Cosmic/Ethereal/Sacred Geometry

PALETA:
  - Fondo: Negro profundo (#0a0a0a) con neblina sutil
  - Estrellas: Colores del arcoíris según dimensión
  - Enlaces: Líneas de luz blanca semi-transparente
  - Centro (usuario): Púrpura sagrado (#8B5CF6)
  - Órbitas: Líneas circulares tenues

PARTÍCULAS:
  - 5000 estrellas de fondo (polvo cósmico)
  - Partículas flotantes en primer plano
  - Efecto de profundidad (parallax)

ILUMINACIÓN:
  - Luz central desde el usuario
  - Estrellas emiten luz propia
  - Post-processing: bloom, god rays

AUDIO:
  - Frecuencias según dimensión activa
  - Sonido al hacer click (nota musical correspondiente)
  - Ambient background sutil
```

---

## 🙏 Filosofía del Universo Imaginal

### al-'ālam al-mithālī (العالم المثالي)

> "El mundo imaginal no es fantasía. Es el plano intermedio entre lo material y lo espiritual, donde el conocimiento cobra forma visible y las relaciones se hacen evidentes."

**Principios:**

1. **Todo es relación**: No hay notas aisladas, solo grados de conexión
2. **El tiempo es cíclico**: Eventos orbitan, vuelven, se transforman
3. **El color es información**: Cada dimensión vibra en su frecuencia
4. **La distancia es relevancia**: Lo importante está cerca, lo distante espera
5. **El movimiento es vida**: El universo respira, se expande, evoluciona

---

## 📚 Referencias y Próximos Pasos

### Documentación Relacionada

- `ARQUITECTURA_DUAL_FRONTEND.md` - Dónde implementar (Next.js 3000)
- `FLUJO_INMERSIVO_ESTADO_CERO.md` - Fuente de datos
- `docs/GUIA_INTEGRACION_NEXTJS.md` - Setup técnico

### Próximo Documento

**`GUIA_IMPLEMENTACION_UNIVERSO_IMAGINAL.md`**
- Paso a paso técnico
- Código completo del parser Obsidian
- Componentes 3D específicos
- Algoritmos de posicionamiento

---

**El universo imaginal es el organismo hecho visible.**

**إن شاء الله - Si Dios quiere**

🌌 ✨ 🪐

